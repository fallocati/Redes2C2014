SDIR = src
IDIR = include
ODIR = obj

CXX = g++
CPPFLAGS = -std=c++11 -Wall -I$(IDIR)/

RASTREARUTAS_SOURCES = rastrearutas.cpp
#ENTROPYANALYSIS_SOURCES = entropy_analysis.cpp

RASTREARUTAS_OBJECTS = $(patsubst %,$(ODIR)/%,$(RASTREARUTAS_SOURCES:.cpp=.o))
#ENTROPYANALYSIS_OBJECTS = $(patsubst %,$(ODIR)/%,$(ENTROPYANALYSIS_SOURCES:.cpp=.o))

RASTREARUTAS_LIBS = -lcrafter -lpthread
#ENTROPYANALYSIS_LIBS =

RASTREARUTAS_EXECUTABLE = rastrearutas
#ENTROPYANALYSIS_EXECUTABLE = entropy

.PHONY: all clean

all: $(RASTREARUTAS_EXECUTABLE)
#all: $(RASTREARUTAS_EXECUTABLE) $(ENTROPYANALYSIS_EXECUTABLE)

$(RASTREARUTAS_EXECUTABLE): $(RASTREARUTAS_OBJECTS)
	$(CXX) $^ $(RASTREARUTAS_LIBS) -o $@

#$(ENTROPYANALYSIS_EXECUTABLE): $(ENTROPYANALYSIS_OBJECTS)
#	$(CXX) $^ $(ENTROPYANALYSIS_LIBS) -o $@

$(ODIR)/%.o: $(SDIR)/%.cpp $(IDIR)/%.hpp
	@mkdir -p $(@D)
	$(CXX) -c $(CPPFLAGS) $< -o $@

clean:
	rm -r -f $(ODIR) $(SDIR)/*~ $(IDIR)/*~ *~ $(RASTREARUTAS_EXECUTABLE)

#rm -r -f $(ODIR) $(SDIR)/*~ $(IDIR)/*~ *~ $(RASTREARUTAS_EXECUTABLE) $(ENTROPYANALYSIS_EXECUTABLE)
